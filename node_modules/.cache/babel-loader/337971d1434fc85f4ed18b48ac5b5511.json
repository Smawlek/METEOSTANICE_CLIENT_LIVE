{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ondra/Desktop/UU_METEOSTANICE_SKUPINA9/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ondra/Desktop/UU_METEOSTANICE_SKUPINA9/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ondra/Desktop/UU_METEOSTANICE_SKUPINA9/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../App.css';import moment from'moment';// React\nimport{useEffect,useState}from'react';import Select from'react-select';import Modal from'react-bootstrap/Modal';// Material\nimport TextField from'@mui/material/TextField';import Tooltip from'@mui/material/Tooltip';import{IconButton}from'@mui/material';import Button from'@mui/material/Button';// Ikony\nimport{BsFillGearFill}from\"react-icons/bs\";// Axios\nimport Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var source=Axios.CancelToken.source();var config={cancelToken:source.token};// Konstanty\nvar SERVER_BASE_URL=\"http://localhost:4000\";var Dashboard=function Dashboard(_ref){var public_tokens=_ref.public_tokens,units=_ref.units;var unitsSign='°C';var unitsTransfer=1;var stations=[];// Stanice\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),shownStation=_useState2[0],setShownStation=_useState2[1];var data=[];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),shownData=_useState4[0],setShownData=_useState4[1];// Filtry\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showFilterModal=_useState6[0],setShowFilterModal=_useState6[1];var setFilters={start:moment(Date.now()).subtract(3,'months').format('YYYY-MM-DD'),end:moment(Date.now()).format('YYYY-MM-DD'),granularity:5// 0 - 1 min, 1 - 5 min, 2 - 10 min, 3 - 30 min, 4 - 1 h, 5 - 1 den\n};// UseEffecty\nuseEffect(function(){setUnitsVariables(units);// Získání přístupu ke stanicím\ncheckStations();},[]);useEffect(function(){getData();},[shownStation]);// Axios Calls\nvar _logDevice=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Axios.get(SERVER_BASE_URL+\"/devices/log-public\",{headers:{},params:{public_token:data.token},config:config});case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function _logDevice(_x){return _ref2.apply(this,arguments);};}();var _getReportsByDates=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(shownStation===undefined)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.prev=2;_context2.next=5;return Axios.get(SERVER_BASE_URL+\"/reports/get-by-dates\",{headers:{token:shownStation},params:{start:data.start,end:data.end,granularity:Number(data.granularity)},config:config});case 5:return _context2.abrupt(\"return\",_context2.sent);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](2);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[2,8]]);}));return function _getReportsByDates(_x2){return _ref3.apply(this,arguments);};}();// Funkce\nfunction setUnitsVariables(unit){if(unit===undefined)return;if(unit.toUpperCase()==='FAHRENHEIT'){unitsSign='°F';unitsTransfer=33.8;}}function checkStations(){return _checkStations.apply(this,arguments);}function _checkStations(){_checkStations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var i,temp;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(public_tokens===undefined||public_tokens.length<=0)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:i=0;case 3:if(!(i<public_tokens.length)){_context3.next=11;break;}_context3.next=6;return _logDevice({token:public_tokens[i]});case 6:temp=_context3.sent.data[0];if(temp!=undefined){stations.push(temp.token);if(i===0)setShownStation(temp.token);}case 8:i++;_context3.next=3;break;case 11:case\"end\":return _context3.stop();}}},_callee3);}));return _checkStations.apply(this,arguments);}function changeFilters(data,dateChanged){setFilters=data;if(dateChanged){getData();return;}filterData();}function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:// Ověření\nchechGranularity();// Získání dat\n_context4.next=3;return _getReportsByDates(setFilters);case 3:data=_context4.sent;console.log(data);// Vyfiltrování\nfilterData();case 6:case\"end\":return _context4.stop();}}},_callee4);}));return _getData.apply(this,arguments);}function chechGranularity(){var timeDiff=moment.duration(moment(setFilters.end).diff(setFilters.start)).asDays();if(timeDiff<=1&&setFilters.granularity!=0){setFilters.granularity=0;}if(timeDiff>1&&timeDiff<=3&&setFilters.granularity!=1){setFilters.granularity=1;}if(timeDiff>3&&timeDiff<=7&&setFilters.granularity!=2){setFilters.granularity=2;}if(timeDiff>7&&timeDiff<=14&&setFilters.granularity!=3){setFilters.granularity=3;}if(timeDiff>14&&timeDiff<=30&&setFilters.granularity!=4){setFilters.granularity=4;}if(timeDiff>30&&timeDiff<=90&&setFilters.granularity!=5){setFilters.granularity=5;}if(timeDiff>90){setFilters.granularity=5;setFilters.start=moment(setFilters.end).subtract(90,'days').format('YYYY-MM-DD');}}function filterData(){//\nif(setFilters.granularity===0){//\n}}function downsample(){//\n}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row dashboard-header mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-12 col-lg-11\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\" M\\u011B\\u0159en\\xED teploty \"}),\" \"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header-controls col-sm-12 col-md-12 col-lg-1\",children:/*#__PURE__*/_jsx(Tooltip,{title:\"Nastavit filtry\",placement:\"left\",children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){setShowFilterModal(!showFilterModal);},children:/*#__PURE__*/_jsx(BsFillGearFill,{})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row dashboard-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\" Aktu\\xE1ln\\xED teplota: \"}),/*#__PURE__*/_jsx(\"p\",{children:\" Aktu\\xE1ln\\xED vlhkost: \"})]})]}),/*#__PURE__*/_jsx(Filter,{show:showFilterModal,data:setFilters,handleClose:function handleClose(){setShowFilterModal(false);},change:changeFilters})]});};var Filter=function Filter(_ref4){var show=_ref4.show,data=_ref4.data,handleClose=_ref4.handleClose,change=_ref4.change;var _useState7=useState(data.start),_useState8=_slicedToArray(_useState7,2),start=_useState8[0],setStart=_useState8[1];var _useState9=useState(data.end),_useState10=_slicedToArray(_useState9,2),end=_useState10[0],setEnd=_useState10[1];var _useState11=useState(data.granularity),_useState12=_slicedToArray(_useState11,2),granularity=_useState12[0],setGranularity=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),dateChanged=_useState14[0],setDateChanged=_useState14[1];// Možnosti v Selectech\nvar granularityOptions=[{value:0,label:\"1 minuta\"},{value:1,label:\"5 minut\"},{value:2,label:\"10 minut\"},{value:3,label:\"30 minut\"},{value:4,label:\"1 hodina\"},{value:5,label:\"1 den\"}];// UseEffecty\nuseEffect(function(){setDateChanged(false);},[show]);//\nreturn/*#__PURE__*/_jsxs(Modal,{show:show,size:\"lg\",onHide:handleClose,backdrop:\"static\",keyboard:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\" Nastaven\\xED filtr\\u016F  \"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6 col-lg-6\",children:/*#__PURE__*/_jsx(TextField,{id:\"date\",label:\"Od kdy\",type:\"date\",defaultValue:data.start,onChange:function onChange(e){setStart(e.target.value);setDateChanged(true);},sx:{width:220},InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6 col-lg-6\",children:/*#__PURE__*/_jsx(TextField,{id:\"date\",label:\"Do kdy\",type:\"date\",defaultValue:data.end,onChange:function onChange(e){setEnd(e.target.value);setDateChanged(true);},sx:{width:220},InputLabelProps:{shrink:true}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"new-line\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" Granularita: \"}),/*#__PURE__*/_jsx(Select,{\"aria-labelledby\":\"aria-label\",inputId:\"aria-example-input\",name:\"aria-live-color\",placeholder:\"Vyberte granularitu..*\",defaultValue:granularityOptions[data.granularity],onChange:function onChange(selected){setGranularity(selected.value);},options:granularityOptions})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"new-line\"})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){change({start:start,end:end,granularity:granularity},dateChanged);handleClose();},children:\"Nastavit filtry\"})})]});};export default Dashboard;","map":{"version":3,"names":["moment","useEffect","useState","Select","Modal","TextField","Tooltip","IconButton","Button","BsFillGearFill","Axios","source","CancelToken","config","cancelToken","token","SERVER_BASE_URL","Dashboard","public_tokens","units","unitsSign","unitsTransfer","stations","shownStation","setShownStation","data","shownData","setShownData","showFilterModal","setShowFilterModal","setFilters","start","Date","now","subtract","format","end","granularity","setUnitsVariables","checkStations","getData","_logDevice","get","headers","params","public_token","_getReportsByDates","undefined","Number","unit","toUpperCase","length","i","temp","push","changeFilters","dateChanged","filterData","chechGranularity","console","log","timeDiff","duration","diff","asDays","downsample","Filter","show","handleClose","change","setStart","setEnd","setGranularity","setDateChanged","granularityOptions","value","label","e","target","width","shrink","selected"],"sources":["C:/Users/ondra/Desktop/UU_METEOSTANICE_SKUPINA9/client/src/components/dashboard.js"],"sourcesContent":["import '../App.css';\r\n\r\nimport moment from 'moment';\r\n// React\r\nimport { useEffect, useState } from 'react';\r\nimport Select from 'react-select';\r\nimport Modal from 'react-bootstrap/Modal';\r\n// Material\r\nimport TextField from '@mui/material/TextField';\r\nimport Tooltip from '@mui/material/Tooltip'\r\nimport { IconButton } from '@mui/material'\r\nimport Button from '@mui/material/Button';\r\n// Ikony\r\nimport { BsFillGearFill } from \"react-icons/bs\";\r\n// Axios\r\nimport Axios from 'axios';\r\nconst source = Axios.CancelToken.source();\r\nconst config = { cancelToken: source.token };\r\n// Konstanty\r\nconst SERVER_BASE_URL = \"http://localhost:4000\";\r\n\r\nconst Dashboard = ({ public_tokens, units }) => {\r\n    let unitsSign = '°C';\r\n    let unitsTransfer = 1;\r\n    let stations = [];\r\n    // Stanice\r\n    let [shownStation, setShownStation] = useState();\r\n    let data = [];\r\n    let [shownData, setShownData] = useState();\r\n    // Filtry\r\n    const [showFilterModal, setShowFilterModal] = useState(false);\r\n    let setFilters = {\r\n        start: moment(Date.now()).subtract(3, 'months').format('YYYY-MM-DD'),\r\n        end: moment(Date.now()).format('YYYY-MM-DD'),\r\n        granularity: 5 // 0 - 1 min, 1 - 5 min, 2 - 10 min, 3 - 30 min, 4 - 1 h, 5 - 1 den\r\n    }\r\n    // UseEffecty\r\n    useEffect(() => {\r\n        setUnitsVariables(units);\r\n        // Získání přístupu ke stanicím\r\n        checkStations();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        getData();\r\n    }, [shownStation])\r\n    // Axios Calls\r\n    const _logDevice = async (data) => {\r\n        try {\r\n            return await Axios.get(SERVER_BASE_URL + \"/devices/log-public\", {\r\n                headers: {\r\n                },\r\n                params: {\r\n                    public_token: data.token,\r\n                },\r\n                config\r\n            });\r\n        } catch (error) {\r\n            //throw new Error(error);\r\n        }\r\n    }\r\n\r\n    const _getReportsByDates = async (data) => {\r\n        if (shownStation === undefined) return;\r\n        try {\r\n            return await Axios.get(SERVER_BASE_URL + \"/reports/get-by-dates\", {\r\n                headers: {\r\n                    token: shownStation,\r\n                },\r\n                params: {\r\n                    start: data.start,\r\n                    end: data.end,\r\n                    granularity: Number(data.granularity)\r\n                },\r\n                config\r\n            });\r\n        } catch (error) {\r\n            //throw new Error(error);\r\n        }\r\n    }\r\n    // Funkce\r\n    function setUnitsVariables(unit) {\r\n        if (unit === undefined) return;\r\n\r\n        if (unit.toUpperCase() === 'FAHRENHEIT') {\r\n            unitsSign = '°F';\r\n            unitsTransfer = 33.8;\r\n        }\r\n    }\r\n\r\n    async function checkStations() {\r\n        if (public_tokens === undefined || public_tokens.length <= 0) return;\r\n\r\n        for (let i = 0; i < public_tokens.length; i++) {\r\n            let temp = (await _logDevice({ token: public_tokens[i] })).data[0];\r\n\r\n            if (temp != undefined) {\r\n                stations.push(temp.token);\r\n\r\n                if (i === 0) setShownStation(temp.token);\r\n            }\r\n        }\r\n    }\r\n\r\n    function changeFilters(data, dateChanged) {\r\n        setFilters = data;\r\n\r\n        if (dateChanged) {\r\n            getData();\r\n            return;\r\n        }\r\n\r\n        filterData();\r\n    }\r\n\r\n    async function getData() {\r\n        // Ověření\r\n        chechGranularity();\r\n        // Získání dat\r\n        data = await _getReportsByDates(setFilters);\r\n        console.log(data)\r\n        // Vyfiltrování\r\n        filterData();\r\n    }\r\n\r\n    function chechGranularity() {\r\n        const timeDiff = moment.duration(moment(setFilters.end).diff(setFilters.start)).asDays();\r\n\r\n        if (timeDiff <= 1 && setFilters.granularity != 0) {\r\n            setFilters.granularity = 0;\r\n        }\r\n\r\n        if (timeDiff > 1 && timeDiff <= 3 && setFilters.granularity != 1) {\r\n            setFilters.granularity = 1;\r\n        }\r\n\r\n        if (timeDiff > 3 && timeDiff <= 7 && setFilters.granularity != 2) {\r\n            setFilters.granularity = 2;\r\n        }\r\n\r\n        if (timeDiff > 7 && timeDiff <= 14 && setFilters.granularity != 3) {\r\n            setFilters.granularity = 3;\r\n        }\r\n\r\n        if (timeDiff > 14 && timeDiff <= 30 && setFilters.granularity != 4) {\r\n            setFilters.granularity = 4;\r\n        }\r\n\r\n        if (timeDiff > 30 && timeDiff <= 90 && setFilters.granularity != 5) {\r\n            setFilters.granularity = 5;\r\n        }\r\n\r\n        if (timeDiff > 90) {\r\n            setFilters.granularity = 5;\r\n            setFilters.start = moment(setFilters.end).subtract(90, 'days').format('YYYY-MM-DD');\r\n        }\r\n    }\r\n\r\n    function filterData() {\r\n        //\r\n        if (setFilters.granularity === 0) {\r\n            //\r\n        }\r\n    }\r\n\r\n    function downsample() {\r\n        //\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='dashboard-container'>\r\n                {/* Horní bar */}\r\n                <div className='row dashboard-header mx-auto'>\r\n                    <div className='col-sm-12 col-md-12 col-lg-11'>\r\n                        <h3> <b> Měření teploty </b> </h3>\r\n                    </div>\r\n                    <div className='dashboard-header-controls col-sm-12 col-md-12 col-lg-1'>\r\n                        <Tooltip title={\"Nastavit filtry\"} placement='left'>\r\n                            <IconButton onClick={() => { setShowFilterModal(!showFilterModal) }}>\r\n                                <BsFillGearFill />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                    </div>\r\n                </div>\r\n                {/* Tělo */}\r\n                <div className='row dashboard-body'>\r\n                    <p> Aktuální teplota: </p>\r\n                    <p> Aktuální vlhkost: </p>\r\n                </div>\r\n            </div>\r\n\r\n            <Filter show={showFilterModal} data={setFilters} handleClose={() => { setShowFilterModal(false) }} change={changeFilters} />\r\n        </>\r\n    )\r\n};\r\n\r\n\r\nconst Filter = ({ show, data, handleClose, change }) => {\r\n    const [start, setStart] = useState(data.start);\r\n    const [end, setEnd] = useState(data.end);\r\n    const [granularity, setGranularity] = useState(data.granularity);\r\n    const [dateChanged, setDateChanged] = useState(false)\r\n    // Možnosti v Selectech\r\n    const granularityOptions = [{ value: 0, label: \"1 minuta\" }, { value: 1, label: \"5 minut\" }, { value: 2, label: \"10 minut\" }, { value: 3, label: \"30 minut\" }, { value: 4, label: \"1 hodina\" }, { value: 5, label: \"1 den\" }]\r\n    // UseEffecty\r\n    useEffect(() => {\r\n        setDateChanged(false)\r\n    }, [show])\r\n    //\r\n    return (\r\n        <Modal\r\n            show={show}\r\n            size=\"lg\"\r\n            onHide={handleClose}\r\n            backdrop=\"static\"\r\n            keyboard={false}\r\n        >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title> Nastavení filtrů  </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className='row'>\r\n                    <div className='col-sm-12 col-md-6 col-lg-6'>\r\n                        <TextField\r\n                            id=\"date\"\r\n                            label=\"Od kdy\"\r\n                            type=\"date\"\r\n                            defaultValue={data.start}\r\n                            onChange={(e) => { setStart(e.target.value); setDateChanged(true); }}\r\n                            sx={{ width: 220 }}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <div className='col-sm-12 col-md-6 col-lg-6'>\r\n                        <TextField\r\n                            id=\"date\"\r\n                            label=\"Do kdy\"\r\n                            type=\"date\"\r\n                            defaultValue={data.end}\r\n                            onChange={(e) => { setEnd(e.target.value); setDateChanged(true); }}\r\n                            sx={{ width: 220 }}\r\n                            InputLabelProps={{\r\n                                shrink: true,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className='new-line'></div>\r\n                <div className='row'>\r\n                    <div className='col-sm-12 col-md-12 col-lg-6'>\r\n                        <div className='col'>\r\n                            <label> Granularita: </label>\r\n                            <Select\r\n                                aria-labelledby=\"aria-label\"\r\n                                inputId=\"aria-example-input\"\r\n                                name=\"aria-live-color\"\r\n                                placeholder=\"Vyberte granularitu..*\"\r\n                                defaultValue={granularityOptions[data.granularity]}\r\n                                onChange={(selected) => { setGranularity(selected.value); }}\r\n                                options={granularityOptions} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='new-line'></div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    onClick={() => { change({ start: start, end: end, granularity: granularity }, dateChanged); handleClose(); }}\r\n                >\r\n                    Nastavit filtry\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default Dashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}